51easycomputer
based on 51
设计 11 简易计算器
1. 设计任务
以 AT89S52 单片机为核心，设计一个简易计数器。该计数器需实现以下功能：

能进行两位整数的加、减、乘、除运算。
具备显示和清零功能。
可进行四则运算的单次或连续整型运算（最多连续四个运算），但不支持带优先级的表达式求值。
2. 设计内容及要求
运算功能：实现四位整数的加、减、乘、除运算，其中除法运算结果需保留两位小数。
显示方式：采用 LED 液晶显示器，一行显示表达式，一行显示运算结果。
按键设置：设置 0 - 9 数字键，加 “+”、减 “-”、乘 “×”、除 “÷” 运算符键，等于键 “=” 和清零键 “C”，用于数字键入、控制运算和清零等操作。
蜂鸣器反馈：按下数字键、运算符键和等号键时，蜂鸣器响一声 “滴”；按下清零键时，蜂鸣器响两声 “滴、滴”。
开关机控制：设置开机键 “ON” 和关机键 “OFF”，控制计算器的开启和关闭。开机后 30 秒无输入，则自动关机（黑屏）。
3. 设计指导
键盘设计：设置一个 4×4 的矩阵键盘，模拟计算器键盘，包含 0 - 9 数字键，加 “+”、减 “-”、乘 “×”、除 “÷” 运算符键，等于键 “=” 和清零键 “C”。
显示设计：采用 LCD1602 液晶显示器，16 字 ×2 行显示模式，用于显示完整的计算过程和计算结果，例如：

image

需注意，按输入顺序进行计算，不遵循先乘除、后加减的规则。
合理性判断：在按下等号按键时，要判断计算的合理性。若不合理或超出运算和显示范围，进行声光提示，点亮红色发光二极管、蜂鸣器响三声 “滴、滴、滴”。
缓冲区设置：在内存设置 6 个数据缓冲区，分别为操作数 1、操作数 2、操作数 3、操作数 4、操作数 5 和运算结果缓冲区。
清零后显示：完成运算后，按下清零键 “C”，清屏，显示 “请继续”，1 秒钟闪烁 1 次，30 秒后无输入，自动关机（黑屏）。
4. 功能拓展
运算优先级拓展：判断运算符，若键入的是乘 “×”、除 “÷” 运算符，设置中断优先级，按照四则运算的规则 “先乘除、后加减” 进行运算。
键盘功能拓展：设置一个双功能键（相当于计算机键盘上的 “Shift” 键），扩展键盘功能，使数字键 0 - 5 的双功能对应十六进制的 A - F，并在此基础上，实现十六进制数与十进制数的转换。
